<!-- DOCTYPE HTML -->
<html>
    <head>
        <title>Star Wars API Search</title>
    </head>
    
    <body>
        <div id="content">
            <!-- Placeholder -->
        </div>
    
        <!-- Scripts -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>   
        <script src="https://fb.me/react-0.14.6.js"></script>
        <script src="https://fb.me/react-dom-0.14.6.js"></script>
        <script src="http://fb.me/JSXTransformer-0.12.1.js"></script>
        <script type="text/jsx">
            var App,
                SearchField,
                ResultsListing,
                ResultsItem;
            
            App = React.createClass({
                componentDidMount() {
                    this.search('https://swapi.co/api/people?format=json&search=');
                },

                getInitialState: function() {
                    return {
                        searchResults: []
                    }
                },

                search: function(URL) {

                    $.ajax({
                        type: "GET",
                        dataType: 'json',
                        url: URL,
                        success: function(response) {
                            this.showResults(response);
                        }.bind(this)

                    })
                },

                showResults: function(response) {
                    this.setState({
                        searchResults: response.results
                    })
                },

                render: function() {
                    return (
                        <div>
                            <SearchField />
                            <ResultsListing searchResults={this.state.searchResults}/>
                        </div>
                    );
                }
            });

            SearchField = React.createClass({
                render: function() {
                    return (
                        <div className="search-field-wrapper">
                            <input type="text" />
                        </div>
                    )
                }
            });

            ResultsListing = React.createClass({
                render: function(){
                    var resultItems = this.props.searchResults.map(function(result) {
                        return <ResultItem key={result.url} name={result.name} />
                    });

                    return(
                        <ul>
                           {resultItems}
                        </ul>           
                    );
                }
            });

            ResultItem = React.createClass({
                render: function(){
                    return <li>{this.props.name}</li>;
                }
            });

            ReactDOM.render(<App />,  document.getElementById("content"));

        </script>
</html>